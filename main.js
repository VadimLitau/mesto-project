(()=>{"use strict";var e=fetch("https://nomoreparties.co/v1/plus-cohort-4/cards",{headers:{authorization:"69b55c42-ee88-4348-a639-420f0f40fb4f"}}),t=document.querySelector(".popup_AddCard"),o=document.querySelector(".profile__button"),n=document.querySelector(".popup_AddCard_cross"),r=document.querySelector("#photo-gallery__element").content,c=document.querySelector(".popup__form"),l=document.querySelector("#popup__idName"),u=document.querySelector("#popupAddCard__firstInput"),a=document.querySelector("#popupAddCard__secondInput"),i=document.querySelector(".gallery-element"),p=document.querySelector(".popup__photo"),s=document.querySelector(".popup__photo-image"),d=document.querySelector(".popup__photo-name");document.querySelector(".popup_photo_cross"),e.then((function(e){return e.json()})).then((function(e){console.log(e[0].owner._id),console.log(e),e.forEach((function(e){var t,o,n,c,l,u,a,_,f,y;i.prepend((t=e.link,o=e.name,n=e.likes.length,c=e.owner._id,l=r.querySelector(".gallery-element__item").cloneNode(!0),u=l.querySelector(".gallery-element__photo"),a=l.querySelector(".gallery-element__caption-name"),_=l.querySelector(".gallery-element__caption-like"),f=l.querySelector(".gallery-element__deletCard"),y=l.querySelector(".gallery-element__like-counter"),u.alt=o,u.src=t,a.textContent=o,y.textContent=n,_.addEventListener("click",(function(){_.classList.toggle("gallery-element__caption-like_active")})),"3382b6ac0c72abf176e18b90"!=c?f.classList.add("gallery-element__deletCard_notDelete"):f.classList.remove("gallery-element__deletCard_notDelete"),f.addEventListener("click",(function(){l.remove()})),u.addEventListener("click",(function(){m(p),s.alt=u.alt,s.src=u.src,d.textContent=a.textContent})),l))}))}));function _(e){if("Escape"===e.key){var t=document.querySelector(".popup_opened");f(t)}}var m=function(e){e.classList.add("popup_opened"),document.addEventListener("keydown",_)},f=function(e){e.classList.remove("popup_opened"),document.removeEventListener("keydown",_)},y=function(e,t){e.some((function(e){return!e.validity.valid}))?(t.classList.add(v.inactiveButtonClass),t.type="button"):(t.classList.remove(v.inactiveButtonClass),t.type="submit")},v={formSelector:".popup__form",inputSelector:".popup__form-input",submitButtonSelector:".popup__form-button",inactiveButtonClass:"popup__form-button_disabled",inputErrorClass:"popup__form-input_type_error",inputErrorClassActive:"popup__form-input-error_active",errorClass:"popup__error_visible"},S=document.querySelector(".profile__info-name"),q=document.querySelector(".profile__info-profession"),h=document.querySelector(".profile__info-button"),C=(document.querySelector(".popup__cross"),document.querySelector(".popup_profile")),b=document.querySelector("#popup__idProfession");document.querySelectorAll(".popup").forEach((function(e){e.addEventListener("click",(function(t){(t.target.classList.contains("popup__cross")||t.target.classList.contains("popup_opened")||t.target.classList.contains("popup__photo_wrap"))&&f(e)}))})),h.addEventListener("click",(function(){m(C),l.value=S.textContent,b.value=q.textContent})),o.addEventListener("click",(function(){m(t)})),c.addEventListener("submit",(function(e){fetch("https://nomoreparties.co/v1/plus-cohort-4/users/me",{method:"PATCH",headers:{authorization:"69b55c42-ee88-4348-a639-420f0f40fb4f","Content-Type":"application/json"},body:JSON.stringify({name:l.value,about:b.value})}),S.textContent=l.value,q.textContent=b.value,f(C),e.preventDefault()})),n.addEventListener("click",(function(){f(t)})),t.addEventListener("submit",(function(e){var o,n;f(t),o=a.value,n=u.value,fetch("https://nomoreparties.co/v1/plus-cohort-4/cards",{method:"POST",headers:{authorization:"69b55c42-ee88-4348-a639-420f0f40fb4f","Content-Type":"application/json"},body:JSON.stringify({name:n,link:o})}),i.prepend(function(e,t){var o=r.querySelector(".gallery-element__item").cloneNode(!0),n=o.querySelector(".gallery-element__photo"),c=o.querySelector(".gallery-element__caption-name"),l=o.querySelector(".gallery-element__caption-like"),u=o.querySelector(".gallery-element__deletCard");return n.alt=t,n.src=e,c.textContent=t,l.addEventListener("click",(function(){l.classList.toggle("gallery-element__caption-like_active")})),u.addEventListener("click",(function(){o.remove()})),n.addEventListener("click",(function(){m(p),s.alt=n.alt,s.src=n.src,d.textContent=c.textContent})),o}(o,n)),a.value="",u.value="",document.querySelector(".popup_AddCard_form-button").classList.add("popup__form-button_disabled"),document.querySelector(".popup_AddCard_form-button").type="button",e.preventDefault()})),Array.from(document.querySelectorAll(v.formSelector)).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()})),function(e){var t=Array.from(e.querySelectorAll(v.inputSelector)),o=e.querySelector(v.submitButtonSelector);y(t,o),t.forEach((function(n){n.addEventListener("input",(function(){(function(e,t){t.validity.valid?function(e,t){var o=e.querySelector(".".concat(t.id,"-error"));t.classList.remove(v.inputErrorClass),o.textContent="",o.classList.remove(v.inputErrorClassActive)}(e,t):function(e,t,o){var n=e.querySelector(".".concat(t.id,"-error"));t.classList.add(v.inputErrorClass),n.textContent=o,n.classList.add(v.inputErrorClassActive)}(e,t,t.validationMessage)})(e,n),y(t,o)}))}))}(e)})),fetch("https://nomoreparties.co/v1/plus-cohort-4/users/me",{headers:{authorization:"69b55c42-ee88-4348-a639-420f0f40fb4f"}}).then((function(e){return e.json()})).then((function(e){document.querySelector(".profile__info-name").textContent=e.name,document.querySelector(".profile__info-profession").textContent=e.about,document.querySelector(".profile__avatar").src=e.avatar}))})();