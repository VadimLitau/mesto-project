(()=>{"use strict";for(var e=document.querySelector(".popup_AddCard"),t=document.querySelector(".profile__button"),o=document.querySelector(".popup_AddCard_cross"),n=document.querySelector("#photo-gallery__element").content,r=document.querySelector(".popup__form"),c=document.querySelector("#popup__idName"),u=document.querySelector("#popupAddCard__firstInput"),l=document.querySelector("#popupAddCard__secondInput"),a=document.querySelector(".gallery-element"),i=document.querySelector(".popup__photo"),p=document.querySelector(".popup__photo-image"),s=document.querySelector(".popup__photo-name"),d=(document.querySelector(".popup_photo_cross"),function(e,t,o){var r=n.querySelector(".gallery-element__item").cloneNode(!0),c=r.querySelector(".gallery-element__photo"),u=r.querySelector(".gallery-element__caption-name"),l=r.querySelector(".gallery-element__caption-like"),a=r.querySelector(".gallery-element__deletCard"),d=r.querySelector(".gallery-element__like-counter");return fetch("https://nomoreparties.co/v1/plus-cohort-4/cards",{headers:{authorization:"69b55c42-ee88-4348-a639-420f0f40fb4f"}}).then((function(e){return e.json()})).then((function(n){c.alt=n[t].name,c.src=n[e].link,u.textContent=n[t].name,d.textContent=n[o].likes.length})),l.addEventListener("click",(function(){l.classList.toggle("gallery-element__caption-like_active")})),a.classList.add("gallery-element__deletCard_notDelete"),c.addEventListener("click",(function(){m(i),p.alt=c.alt,p.src=c.src,s.textContent=u.textContent})),r}),_=0;_<6;_++)a.append(d(_,_,_));function f(e){if("Escape"===e.key){var t=document.querySelector(".popup_opened");y(t)}}var m=function(e){e.classList.add("popup_opened"),document.addEventListener("keydown",f)},y=function(e){e.classList.remove("popup_opened"),document.removeEventListener("keydown",f)},v=function(e,t){e.some((function(e){return!e.validity.valid}))?(t.classList.add(S.inactiveButtonClass),t.type="button"):(t.classList.remove(S.inactiveButtonClass),t.type="submit")},S={formSelector:".popup__form",inputSelector:".popup__form-input",submitButtonSelector:".popup__form-button",inactiveButtonClass:"popup__form-button_disabled",inputErrorClass:"popup__form-input_type_error",inputErrorClassActive:"popup__form-input-error_active",errorClass:"popup__error_visible"},h=document.querySelector(".profile__info-name"),q=document.querySelector(".profile__info-profession"),C=document.querySelector(".profile__info-button"),b=(document.querySelector(".popup__cross"),document.querySelector(".popup_profile")),L=document.querySelector("#popup__idProfession");document.querySelectorAll(".popup").forEach((function(e){e.addEventListener("click",(function(t){(t.target.classList.contains("popup__cross")||t.target.classList.contains("popup_opened")||t.target.classList.contains("popup__photo_wrap"))&&y(e)}))})),C.addEventListener("click",(function(){m(b),c.value=h.textContent,L.value=q.textContent})),t.addEventListener("click",(function(){m(e)})),r.addEventListener("submit",(function(e){fetch("https://nomoreparties.co/v1/plus-cohort-4/users/me",{method:"PATCH",headers:{authorization:"69b55c42-ee88-4348-a639-420f0f40fb4f","Content-Type":"application/json"},body:JSON.stringify({name:c.value,about:L.value})}),h.textContent=c.value,q.textContent=L.value,y(b),e.preventDefault()})),o.addEventListener("click",(function(){y(e)})),e.addEventListener("submit",(function(t){var o,r;y(e),o=l.value,r=u.value,fetch("https://nomoreparties.co/v1/plus-cohort-4/cards",{method:"POST",headers:{authorization:"69b55c42-ee88-4348-a639-420f0f40fb4f","Content-Type":"application/json"},body:JSON.stringify({name:r,link:o})}),a.prepend(function(e,t){var o=n.querySelector(".gallery-element__item").cloneNode(!0),r=o.querySelector(".gallery-element__photo"),c=o.querySelector(".gallery-element__caption-name"),u=o.querySelector(".gallery-element__caption-like"),l=o.querySelector(".gallery-element__deletCard");return r.alt=t,r.src=e,c.textContent=t,u.addEventListener("click",(function(){u.classList.toggle("gallery-element__caption-like_active")})),l.addEventListener("click",(function(){o.remove()})),r.addEventListener("click",(function(){m(i),p.alt=r.alt,p.src=r.src,s.textContent=c.textContent})),o}(o,r)),l.value="",u.value="",document.querySelector(".popup_AddCard_form-button").classList.add("popup__form-button_disabled"),document.querySelector(".popup_AddCard_form-button").type="button",t.preventDefault()})),Array.from(document.querySelectorAll(S.formSelector)).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()})),function(e){var t=Array.from(e.querySelectorAll(S.inputSelector)),o=e.querySelector(S.submitButtonSelector);v(t,o),t.forEach((function(n){n.addEventListener("input",(function(){(function(e,t){t.validity.valid?function(e,t){var o=e.querySelector(".".concat(t.id,"-error"));t.classList.remove(S.inputErrorClass),o.textContent="",o.classList.remove(S.inputErrorClassActive)}(e,t):function(e,t,o){var n=e.querySelector(".".concat(t.id,"-error"));t.classList.add(S.inputErrorClass),n.textContent=o,n.classList.add(S.inputErrorClassActive)}(e,t,t.validationMessage)})(e,n),v(t,o)}))}))}(e)})),fetch("https://nomoreparties.co/v1/plus-cohort-4/users/me",{headers:{authorization:"69b55c42-ee88-4348-a639-420f0f40fb4f"}}).then((function(e){return e.json()})).then((function(e){document.querySelector(".profile__info-name").textContent=e.name,document.querySelector(".profile__info-profession").textContent=e.about,document.querySelector(".profile__avatar").src=e.avatar})),fetch("https://nomoreparties.co/v1/plus-cohort-4/cards",{headers:{authorization:"69b55c42-ee88-4348-a639-420f0f40fb4f"}}).then((function(e){return e.json()})).then((function(e){e.forEach((function(e){e.name}))}))})();